# bslpretty
Инструмент для оформления кода 1С.
Представляет собой набор плагинов для парсера встроенного языка 1С [osparser](https://github.com/oscript-library/osparser).
Ими можно воспользоваться самостоятельно или с помощью скрипта bslpretty.os.

Плагин [Замена неканоничных слов](https://github.com/oscript-library/osparser/blob/dev/examples/plugins/%D0%9A%D0%BB%D0%B0%D1%81%D1%81%D1%8B/%D0%97%D0%B0%D0%BC%D0%B5%D0%BD%D0%B0%D0%9D%D0%B5%D0%BA%D0%B0%D0%BD%D0%BE%D0%BD%D0%B8%D1%87%D0%BD%D1%8B%D1%85%D0%9A%D0%BB%D1%8E%D1%87%D0%B5%D0%B2%D1%8B%D1%85%D0%A1%D0%BB%D0%BE%D0%B2.os) позаимствован из репозитория osparser.

Cкрипт bslpretty.os оформляет исходные коды в каталоге или изменения в репозитории GIT.

В последнем случае оформление будет применено только к строкам, которые не попали в последний коммит.
Если вы отредактировали часть файла, то только измененные строки будут оформлены.

## Использование


## Плагины

### Оформитель отступов
Плагин для оформления отступов в исходном коде. 
Также удаляет не значащие символы в конце строки.

Имеет три параметра
 * Отступ - строка  - строка из которой состоит отступ. Тапример символ табуляции или 4 пробела
 * ПустыеСтрокиСОтступами - Булево - Если истина, то к пустым строкам будет добавлно необходимое количество отступов. В противном случае незначащие символы будут удалены
 * РекурсивныеДополнительныеОтступы - Булево - Если длинное выражение содержит в себе вложенные скобки или вызовы функции, занимает больше одной строки, то может быть удобным делать дополнительный отступ для каждого вложения

Следующий код (Отступ = <TAB>, ПустыеСтроки = Ложь, РекурсивныеДополнительныеОтступы = Ложь; Но в примере это не важно)

```
Функция  Функция1(Парам1, 
Парам2)
	
	Результат = Парам1+Парам2*Парам3;
    Для ц=1 по 100500 Цикл 
	Если Результат>Парам3
		ИЛИ Результат < Парам2 Тогда
		
		Попытка 
		Возврат Парам1/Парам2;
		Исключение
			Возврат СтроковыеФункцииКлиентСервер.ПодставитьПараметрыВСтроку(
			"Число %1 нельзя делить на %2", Парам1, Парам2);
		КонецПопытки;
		
	КонецЕсли;
КонецЦикла;
	Возврат Результат;

КонецФункции
```

оформляет так

Функция  Функция1(Парам1,
	Парам2)

	Результат = Парам1+Парам2*Парам3;
	Для ц=1 по 100500 Цикл
		Если Результат>Парам3
			ИЛИ Результат < Парам2 Тогда

			Попытка
				Возврат Парам1/Парам2;
			Исключение
				Возврат СтроковыеФункцииКлиентСервер.ПодставитьПараметрыВСтроку(
					"Число %1 нельзя делить на %2", Парам1, Парам2);
			КонецПопытки;

		КонецЕсли;
	КонецЦикла;
	Возврат Результат;

КонецФункции

### Оформитель пробелов
Плагин расставляет пробелы между токенами языка и/или удаляет лишние пробелы.
Параметров не имеет.

Код:
```
Функция  ДваПлюсДваУмножитьНаДва(Парам1,Парам2)Экспорт
	
	Возврат  Парам1+Парам2*Парам3;

КонецФункции
```

Оформляет так:

```
Функция ДваПлюсДваУмножитьНаДва(Парам1, Парам2) Экспорт
	
	Возврат Парам1 + Парам2*Парам3;

КонецФункции
```


### Выравнивание аргументов
Не люблю это соглашение об оформлении кода. Но я постарался его реализовать.

Код

```
Стр = новый Структура();
Стр.Вставить("Результат1", п);
Стр.Вставить("Резу", п1);
Стр.Вставить("Рез", п2);
```

Заменяет на код

```
Стр = новый Структура();
Стр.Вставить("Результат1", п);
Стр.Вставить("Резу",       п1);
Стр.Вставить("Рез",        п2);
```
